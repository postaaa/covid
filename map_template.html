<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=ILZBZ-6UOEO-O27WF-SA3PG-OH2NS-FLF4Z"></script>
    <title>上海（{{ range_text }}）疫情地图</title>
    <style>
       body,html{
           width: 100%;
           height: 100%;
           padding: 0;
           margin: 0;
       }
       #container{
           width: 100%;
           height: 100%;
           overflow: hidden;
       }
    </style>
</head>
<body>
    <div id='container'></div>
    <script>
        var center = new qq.maps.LatLng(31.23, 121.5);
        var map = new qq.maps.Map(document.getElementById('container'),{
            center: center,
            zoom: 12
        });

        {% for point in points %}
        var marker = new qq.maps.Marker({
            position: new qq.maps.LatLng({{ point.lat }}, {{ point.lng }}),
            map: map
        });
        var label = new qq.maps.Label({
            position: new qq.maps.LatLng({{ point.lat }}, {{ point.lng }}),
            offset: new qq.maps.Size(10, -50),
            style: {
                "border-color": "#ff0000"
            },
            map: map,
            content: '{{ point.address }}'
        });
        {% endfor %}
        /*
        var addresses = {{ addresses }};

        var map = new BMapGL.Map('container');
        map.centerAndZoom(new BMapGL.Point(121.5,31.23), 12);
        map.enableScrollWheelZoom(true);
        var myGeo = new BMapGL.Geocoder();
        function mark(i) {
            var address = addresses[i];
            myGeo.getPoint(address, function(point) {
                if (point) {
                    var marker = new BMapGL.Marker(new BMapGL.Point(point.lng, point.lat));
                    var label = new BMapGL.Label(address, {offset:new BMapGL.Size(10,-35)});
                    map.addOverlay(marker);
                    marker.setLabel(label);

                }
            }, "上海市");
            if (i+1 < addresses.length) {
                setTimeout(window.mark, 10, i+1);
            }
        }
        mark(0);
        */

    </script>
</body>
</html>
